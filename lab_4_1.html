<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blair Ednie - Data Visualization Portfolio</title>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            line-height: 1.6;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        header {
            text-align: center;
            padding: 40px 0;
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            margin-bottom: 30px;
        }
        h1 {
            color: #2c3e50;
            margin: 0;
        }
        .subtitle {
            color: #7f8c8d;
            font-size: 1.2em;
            margin-top: 10px;
        }
        main {
            background-color: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        p {
            color: #34495e;
        }
        .tooltip {
            position: absolute;
            background-color: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 5px;
            border-radius: 4px;
            pointer-events: none;
        }
        .viz-item {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .viz-item img {
            width: 100%;
            height: 600px;
            object-fit: contain;
            background-color: #f8f9fa;
            border-radius: 4px;
            margin-bottom: 15px;
        }
        .viz-item h3 {
            color: #2c3e50;
            margin-top: 0;
            font-size: 1.4em;
        }
        .viz-item p {
            color: #666;
            margin-bottom: 0;
        }
        .nav {
            text-align: center;
            margin-bottom: 20px;
        }
        .nav a {
            display: inline-block;
            padding: 10px 20px;
            background-color: #3498db;
            color: white;
            text-decoration: none;
            border-radius: 4px;
            transition: background-color 0.3s ease;
            margin: 0 10px;
        }
        .nav a:hover {
            background-color: #2980b9;
        }
    </style>
</head>

<body>
    <nav class="nav">
        <a href="index.html">Home</a>
    </nav>

    <header>
        <h1>Blair Ednie</h1>
        <div class="subtitle">Tableau Visualizations</div>
    </header>
    <main>
        <p>Lab 4.1 Tableau Visualizations</p>
        
        <p>These visualizations use the `sample_-_superstore.xls` dataset.</p>
        <p>This visualization created with help from Anthropic's Claude 3.5 LLM.</p>
        
        <h2>Choropleth of Sales Volume</h2>
        <p>Top 3 states by sales: California (457,688), New York (310,876), Texas (170,188)</p>
        <p>Bottom 3 states by sales: North Dakota (920), Maine (1,271), West Virginia (1,210)</p>
        <div class="viz-item">
          <img src="choropleth-sales.png" alt="US Sales Distribution Choropleth Map">
          <p>A filled map visualization showing the distribution of sales across US states, with darker colors indicating higher sales volumes. The visualization reveals strong sales concentration in coastal states and major economic centers.</p>
        </div>

        <h2>Category Sales Comparison</h2>
        <p>Sales breakdown by category:</p>
        <ul>    
            <li>Technology: $836,154 (highest performer)</li>
            <li>Office Supplies: $719,047 (lowest performer)</li>
            <li>Furniture: $742,000 </li>
        </ul>
        <div class="viz-item">
            <img src="bar-chart-sales.png" alt="Bar Chart of Sales by Category">
            <p>A horizontal bar chart comparing total sales across product categories. Technology leads sales performance with over $800K in sales, followed by Furniture at $742K, and Office Supplies with approximately $719K. The fairly even distribution across categories suggests a well-balanced product portfolio.</p>
        </div>

        <h2>Monthly Sales Trends</h2>
        <p>Analysis of sales patterns from 2014-2017:</p>
        <ul>
            <li>Seasonal Patterns:
                <ul>
                    <li>Consistent year-end peaks in November-December</li>
                    <li>Regular early-year dips in January-February</li>
                    <li>Mid-year volatility with August-September spikes</li>
                </ul>
            </li>
            <li>Year-over-Year Growth:
                <ul>
                    <li>2014: Peak around $80K</li>
                    <li>2015: Lower performance but upward trend</li>
                    <li>2016: Growth continuing, November spike to $95K</li>
                    <li>2017: Strongest year, reaching $115K in November</li>
                </ul>
            </li>
        </ul>
        <div class="viz-item">
            <img src="monthly-sales-trend.png" alt="Monthly Sales Trend Line Chart">
            <p>A line chart showing monthly sales trends from 2014 to 2017. The visualization reveals clear seasonal patterns with year-end peaks, early-year dips, and an overall upward trend in sales volume. The dotted trend line confirms the consistent growth across the period, with increasing sales volatility in later years.</p>
        </div>
    </main>

  <script>
    const margin = { top: 20, right: 20, bottom: 50, left: 50 };
    const width = 700 - margin.left - margin.right;
    const height = 500 - margin.top - margin.bottom;

    const tooltip = d3.select("body")
      .append("div")
      .attr("class", "tooltip")
      .style("opacity", 0);

    // Fetch data from URL
    d3.csv("https://raw.githubusercontent.com/bednie/cs39ae-static/refs/heads/main/AustralianAverageMaxTemp.csv").then(data => {
      // Parse year and temperature
      data.forEach(d => {
        d.Year = +d.Year;
        d.Temp = +d.Temp;
      });

      // Create SVG with margins
      const svg = d3.select("#line-chart")
        .append("svg")
        .attr("width", width + margin.left + margin.right)
        .attr("height", height + margin.top + margin.bottom)
        .append("g")
        .attr("transform", `translate(${margin.left},${margin.top})`);

      // Create scales
      const xScale = d3.scaleLinear()
        .domain(d3.extent(data, d => d.Year))
        .range([0, width]);

      const yScale = d3.scaleLinear()
        .domain(d3.extent(data, d => d.Temp))
        .range([height, 0]);

      // Create line generator
      const line = d3.line()
        .x(d => xScale(d.Year))
        .y(d => yScale(d.Temp));

      // Create axes
      const xAxis = d3.axisBottom(xScale).tickFormat(d3.format("d"));
      const yAxis = d3.axisLeft(yScale);

      svg.append("g")
        .attr("transform", `translate(0,${height})`)
        .call(xAxis);

      svg.append("g")
        .call(yAxis);

      // Add chart title
      svg.append("text")
        .attr("class", "chart-title")
        .attr("text-anchor", "middle")
        .attr("x", width / 2)
        .attr("y", -margin.top / 2 + 10)
        .text("Average Maximum Temperature in Australia");

      // Add axis labels
      svg.append("text")
        .attr("class", "x-label")
        .attr("text-anchor", "middle")
        .attr("x", width / 2)
        .attr("y", height + margin.bottom - 10) // Adjusted y position
        .text("Year");

      svg.append("text")
        .attr("class", "y-label")
        .attr("text-anchor", "middle")
        .attr("transform", `translate(${-margin.left + 20},${height / 2}) rotate(-90)`) // Adjusted position
        .text("Temperature (°C)");

      // Populate dropdown options
      const stationSelect = d3.select("#station-select");
      const stations = [...new Set(data.map(d => d.name))];

      stationSelect.selectAll("option")
        .data(stations)
        .enter()
        .append("option")
        .text(d => d);

      // Draw initial line chart
      updateLineChart(stations[0]);

      // Update line chart on dropdown change
      stationSelect.on("change", function() {
        const selectedStation = d3.select(this).property("value");
        updateLineChart(selectedStation);
      });

      function updateLineChart(station) {
        const filteredData = data.filter(d => d.name === station);

        svg.selectAll(".line").remove();
        svg.selectAll(".dot").remove(); // Remove existing dots

        svg.append("path")
          .datum(filteredData)
          .attr("class", "line")
          .attr("fill", "none")
          .attr("stroke", "steelblue")
          .attr("stroke-width", 1.5)
          .attr("d", line);

        // Add tooltips
        svg.selectAll(".dot")
          .data(filteredData)
          .enter()
          .append("circle")
          .attr("class", "dot")
          .attr("cx", d => xScale(d.Year))
          .attr("cy", d => yScale(d.Temp))
          .attr("r", 3)
          .on("mouseover", (event, d) => {
            tooltip.transition()
              .duration(200)
              .style("opacity", .9);
            tooltip.html(`Year: ${d.Year}<br/>Temp: ${d.Temp}°C`)
              .style("left", (event.pageX + 10) + "px")
              .style("top", (event.pageY - 28) + "px");
          })
          .on("mouseout", d => {
            tooltip.transition()
              .duration(500)
              .style("opacity", 0);
          });
      }
    });
  </script>
</body>
</html>
